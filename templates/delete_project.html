{% extends 'base.html' %}
{% block title %}Delete Project - {{ project.title }}{% endblock %}
{% block content %}
<div class="row justify-content-center">
  <div class="col-md-8">
    <div class="card shadow-sm">
      <div class="card-body">
        <h2 class="card-title mb-4 text-danger">
          <i class="fas fa-exclamation-triangle me-2"></i>Delete Project
        </h2>
        
        <div class="alert alert-warning">
          <h5 class="alert-heading">Warning!</h5>
          <p class="mb-0">You are about to delete the project "<strong>{{ project.title }}</strong>". This action cannot be undone.</p>
        </div>
        
        <div class="mb-4">
          <h5>Project Details:</h5>
          <ul class="list-unstyled">
            <li><strong>Title:</strong> {{ project.title }}</li>
            <li><strong>Description:</strong> {{ project.description }}</li>
            <li><strong>Course:</strong> {{ project.course }}</li>
            <li><strong>Deadline:</strong> {{ project.deadline }}</li>
            <li><strong>Created by:</strong> {{ project.created_by }}</li>
          </ul>
        </div>
        
        {% if incomplete_tasks %}
        <div class="alert alert-danger">
          <h5 class="alert-heading">Cannot Delete Project</h5>
          <p class="mb-2">The following tasks are not completed:</p>
          <ul class="mb-0">
            {% for task in incomplete_tasks %}
            <li>{{ task.title }} (Status: {{ task.status }})</li>
            {% endfor %}
          </ul>
          <hr>
          <p class="mb-0"><strong>Please complete all tasks before deleting the project.</strong></p>
        </div>
        {% else %}
        <div class="alert alert-success">
          <h5 class="alert-heading">All Tasks Completed</h5>
          <p class="mb-0">All tasks in this project are marked as "Done". You can proceed with deletion.</p>
        </div>
        {% endif %}
        
        <form method="POST">
          <div class="d-flex gap-2">
            {% if not incomplete_tasks %}
            <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this project? This action cannot be undone.')">
              <i class="fas fa-trash me-2"></i>Delete Project
            </button>
            {% endif %}
            <a href="{{ url_for('view_project', project_id=project._id) }}" class="btn btn-secondary">
              <i class="fas fa-arrow-left me-2"></i>Cancel
            </a>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %} 